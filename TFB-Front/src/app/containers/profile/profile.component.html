<div class="profile-container">
  <h2 class="title">
    <mat-icon class="profile-icon" fontIcon="person"></mat-icon>
    {{ "account.profile" | translate }}
  </h2>
  <form [formGroup]="userForm">
    <div class="profile-field">
      <label>{{ "account.firstName" | translate }}</label>
      <input type="text" formControlName="first_name" [readonly]="!isEditing" />
    </div>

    <div class="profile-field">
      <label>{{ "account.lastName" | translate }}</label>
      <input type="text" formControlName="last_name" [readonly]="!isEditing" />
    </div>

    <div class="profile-field">
      <label>{{ "account.email" | translate }}</label>
      <input type="email" formControlName="email" [readonly]="!isEditing" />
    </div>

    <div class="profile-field">
      <label>{{ "account.phone" | translate }}</label>
      <input type="text" formControlName="phone" [readonly]="!isEditing" />
    </div>

    <div class="profile-field">
      <label>{{ "account.address" | translate }}</label>
      <input type="text" formControlName="address" [readonly]="!isEditing" />
    </div>

    <div class="profile-field">
      <label>{{ "account.username" | translate }}</label>
      <input type="text" formControlName="username" [readonly]="!isEditing" />
    </div>

    <p class="server-message" *ngIf="messageServer.length">
      * {{ messageServer }}
    </p>

    <button
      *ngIf="!isEditing"
      (click)="toggleEdit()"
      type="button"
      class="edit-btn"
    >
      {{ "account.edit" | translate }}
    </button>
    <button
      *ngIf="isEditing"
      (click)="updateProfile()"
      type="button"
      class="save-btn"
    >
      {{ "account.save" | translate }}
    </button>
    <button
      *ngIf="isEditing"
      (click)="toggleEdit()"
      type="button"
      class="cancel-btn"
    >
      {{ "account.cancel" | translate }}
    </button>

    <!-- ðŸ” Change Password Button -->
    <button
      (click)="toggleChangePassword()"
      type="button"
      class="change-password-btn"
    >
      {{ "account.changePassword" | translate }}
    </button>
  </form>

  <!-- ðŸ”‘ Change Password Form -->
  <div *ngIf="isChangingPassword" class="password-container">
    <h3>{{ "account.changePassword" | translate }}</h3>
    <form [formGroup]="passwordForm">
      <div class="profile-field">
        <label>{{ "account.oldPassword" | translate }}</label>
        <input type="password" formControlName="old_password" />
      </div>
      <div class="profile-field">
        <label>{{ "account.newPassword" | translate }}</label>
        <input type="password" formControlName="new_password" />
      </div>
      <div class="profile-field">
        <label>{{ "account.confirmPassword" | translate }}</label>
        <input type="password" formControlName="confirm_password" />
      </div>
      <p class="server-message" *ngIf="passwordMessage.length">
        * {{ passwordMessage }}
      </p>
      <button (click)="changePassword()" type="button" class="save-btn">
        {{ "account.changePassword" | translate }}
      </button>
      <button (click)="toggleChangePassword()" type="button" class="cancel-btn">
        {{ "account.cancel" | translate }}
      </button>
    </form>
  </div>
</div>
