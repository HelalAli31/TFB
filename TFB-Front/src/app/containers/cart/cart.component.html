<div class="cart-container">
  <h2 class="cart-title">My Cart ðŸ›’</h2>

  <!-- Empty Cart Message -->
  <div *ngIf="cartItems.length === 0" class="empty-cart">
    <p>Your cart is empty. ðŸ˜ž</p>
  </div>

  <!-- Cart Items Loop -->
  <div *ngFor="let item of cartItems; let i = index" class="cart-item">
    <!-- Product Image -->
    <div class="cart-image-container">
      <img
        [src]="
          item.product_id?.image
            ? 'assets/products/' + item.product_id.image + '.jpg'
            : 'assets/products/default.jpg'
        "
        class="cart-image"
        alt="{{ item.product_id?.name || 'Product' }}"
      />
    </div>

    <!-- Product Details -->
    <div class="cart-details">
      <h3 class="cart-name">
        {{ item.product_id?.name || "Unnamed Product" }}
      </h3>
      <p class="cart-brand">Brand: {{ item.product_id?.brand || "Unknown" }}</p>

      <!-- Price Section -->
      <p class="cart-price">
        ðŸ’° <b>Unit Price:</b>
        <span *ngIf="item.product_id?.sale?.isOnSale; else normalPrice">
          {{ item.product_id?.sale?.salePrice }} â‚ª
        </span>
        <ng-template #normalPrice>
          {{ item.product_id?.price || 0 }} â‚ª
        </ng-template>
        <br />
        ðŸ”¹ <b>Total Price:</b>
        <span *ngIf="item.product_id?.sale?.isOnSale; else totalNormalPrice">
          {{ (item.product_id?.sale?.salePrice || 0) * item.amount }} â‚ª
        </span>
        <ng-template #totalNormalPrice>
          {{ (item.product_id?.price || 0) * item.amount }} â‚ª
        </ng-template>
      </p>
    </div>

    <div class="quantity-control">
      <button
        class="quantity-btn left-arrow"
        (click)="decreaseQuantity(i)"
        [disabled]="item.amount <= 1"
      >
        <span class="material-icons">remove</span>
      </button>

      <div class="quantity-box">{{ item.amount }}</div>

      <button class="quantity-btn right-arrow" (click)="increaseQuantity(i)">
        <span class="material-icons">add</span>
      </button>
    </div>

    <!-- Remove Button -->
    <button class="remove-button" (click)="removeItem(i)">ðŸ—‘ Remove</button>
  </div>

  <!-- Cart Summary -->
  <div class="cart-summary">
    <h3>
      <span class="total-price">Total: {{ getTotalPrice() }} â‚ª</span>
    </h3>

    <!-- Buy Now Button -->
    <button class="buy-now-button">ðŸ›’ Buy Now</button>
  </div>
</div>
