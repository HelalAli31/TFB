<div *ngIf="product">
  <div class="product-detail-container">
    <!-- Left Side: Product Image -->
    <div class="product-image-container">
      <img
        [src]="getProductImage(product)"
        alt="{{ product.name }}"
        (error)="onImageError($event, product)"
        class="product-detail-image"
      />
    </div>

    <!-- Right Side: Product Info -->
    <div class="product-details-container">
      <h2 class="product-title">{{ product.name }}</h2>
      <p class="product-brand">
        Brand: <span>{{ product.brand }}</span>
      </p>

      <!-- Price Section -->
      <div class="price-section">
        <p *ngIf="isCurrentlyOnSale(product.sale)" class="original-price">
          <span *ngIf="product.price !== product.sale.salePrice">
            {{ product.price }} ₪
          </span>
        </p>
        <p *ngIf="isCurrentlyOnSale(product.sale)" class="sale-price">
          {{ product.sale.salePrice }} ₪
        </p>
        <p *ngIf="!isCurrentlyOnSale(product.sale)" class="regular-price">
          {{ product.price }} ₪
        </p>
        <h5
          *ngIf="
            isCurrentlyOnSale(product.sale) &&
            product.price !== product.sale.salePrice
          "
        >
          * Sale ends: {{ product.sale.saleEndDate | date : "mediumDate" }}
        </h5>
      </div>

      <!-- Product Details -->
      <div class="product-details-card">
        <h3 class="section-title">Product Details</h3>
        <div class="decorative-line"></div>
        <!-- Decorative line added -->

        <p *ngIf="product.details?.wattage">
          <strong>Wattage:</strong> {{ product.details.wattage }}W
        </p>
        <p *ngIf="product.details?.capacity">
          <strong>Capacity:</strong> {{ product.details.capacity }}mAh/ml
        </p>
        <p *ngIf="product.details?.customerType">
          <strong>Customer Type:</strong> {{ product.details.customerType }}
        </p>

        <!-- Color Display (Circles) -->
        <div *ngIf="product.details?.color?.length" class="color-section">
          <strong>Available Colors:</strong>
          <div class="color-circles">
            <span
              *ngFor="let color of product.details.color"
              class="color-circle"
              [style.backgroundColor]="color.color"
              [title]="color.color"
            ></span>
          </div>
        </div>

        <!-- Add/Edit to Cart Button -->
        <button
          class="View_Button mt-4"
          [disabled]="product.quantity === 0"
          (click)="openQuantityDialog(product)"
        >
          {{ existingQuantity > 0 ? "Edit" : "Add to Cart" }}
        </button>
      </div>
    </div>
  </div>

  <!-- Description Section at the Bottom -->
  <div class="product-description-container">
    <h3>Description</h3>
    <p>{{ product.description }}</p>
  </div>
</div>
